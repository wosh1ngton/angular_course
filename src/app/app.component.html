<div class="container">

  <nav class="navbar navbar-expand-md navbar-light bg-light">
    <div class="container-fluid">
      <a href="#" class="navbar-brand">
        <img src="../assets/AngularJS-Shield.svg" width="50px" height="55px" alt="">
        <strong> Curso de Angular </strong>
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarPrincipal"
        aria-expanded="false" aria-label="Toggle navigation" aria-controls="navbarPrincipal">
        <span class="navbar-toggler-icon">
        </span>
      </button>

      <div class="collapse navbar-collapse" id="navbarPrincipal">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a href="#" class="nav-link" aria-current="page" (click)="menuEscolhido = 'Home'"
              [class.active]="menuEscolhido == 'Home'">Home</a>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link" aria-current="page" (click)="menuEscolhido = 'Diretivas'"
              [class.active]="menuEscolhido == 'Diretivas'">Diretivas</a>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link" aria-current="page" (click)="menuEscolhido = 'Componente'"
              [class.active]="menuEscolhido == 'Componente'">Componentes</a>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link" aria-current="page" (click)="menuEscolhido = 'Template'"
              [class.active]="menuEscolhido == 'Template'">Templates</a>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link" aria-current="page" (click)="menuEscolhido = 'Injecao'"
              [class.active]="menuEscolhido == 'Injecao'">Injeção de Dependência</a>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link" aria-current="page" (click)="menuEscolhido = 'Outros'"
              [class.active]="menuEscolhido == 'Outros'">Outros</a>
          </li>
        </ul>

      </div>
    </div>
  </nav>

  <div [ngSwitch]="menuEscolhido">

    <div *ngSwitchCase="'Diretivas'">
      <app-submenus [subMenus]="menusDiretivas" (menuAtivado)="updateViewMode($event)"> 
      </app-submenus>    

      <div [ngSwitch]="viewMode">
        <div *ngSwitchCase="'if'" class="m-2">
          <h3> Como adicionar ou remover elementos da página </h3>
          <span class="fs-6 lh-base">
            Para adicionar ou remover um elemento, utilize *NgIf em conjunto com uma expressão ou variável booleana.
            Por padrão, ngIf evita que seja exibido um elemento com um valor nulo associado. Há diversas formas de
            adicionar ou
            remover elementos, no exemplo abaixo, a div aparecerá se a condição do if retornar verdadeiro, caso retorne
            falso, o elemento
            é retirado da tela e também do DOM.
          </span>

          <div class="mt-3 row g-2 bg-light p-2">
            
              <div class="col-auto">
                <label for="totalDeCursos" class="align-middle">Total de Cursos</label>
              </div>
              <div class="col-auto">
                <input type="number" #totalCursos class="form-control form-control-md">
              </div>
              <div class="col-auto">
                <button class="btn btn-primary btn-md" (click)="onKeyUp(totalCursos.value)">Enviar</button>
              </div>
              <div class="col-auto">
                <span class="align-middle">Informe um valor e clique em enviar para testar a diretiva ngIf </span>
              </div>
            
          </div>

          <h5 class="m-2"> 1. Utilizando a diretiva *ngIf </h5>
          <span class="fs-6 lh-base">
            Para testar o exemplo informe um valor para Total de Cursos no formulário logo acima, se o valor for maior
            que 0 haverá cursos e a div com a mensagem "Lista de Cursos" aparecerá, caso seja 0 a div exibida será 
            a que possui a mensagem "Ainda não há cursos".
          </span>
          <pre class="bg-light">
                {{ textoHtml }}
              </pre>

          <div *ngIf="courses.length > 0" class="p-3 bg-light text-primary border border-primary">
            Lista de Cursos
          </div>

          <div *ngIf="courses.length == 0" class="p-3 bg-light text-danger border border-danger">
            Ainda não há cursos
          </div>
          <h5 class="m-2"> 2. Utilizando *ngIf com template variable e ng-template </h5>
          <span class="fs-6 lh-base">
            A seguir, têm-se o mesmo resultado do if anterior, utilizando ng-template e a instrução else,
            repare que a template variable #noCourses e #coursesList foram utilizadas para chamar o ng-template
            correspondente. a template variable é a referência para a div que será exibida conforme resultado
            do if.
          </span>

          <pre class="bg-light">
                {{ textoHtmlIfNGTemplate }}
          </pre>

          <div *ngIf="courses.length > 0; then coursesList else noCourses"> </div>
          <ng-template #coursesList class="border border-primary text-primary">
            <div class="border border-primary text-primary-3 p-3"> Lista de Cursos </div>             
          </ng-template>

          <ng-template #noCourses>
            <div class="border border-danger text-danger p-3"> Ainda não há cursos </div> 
          </ng-template>
          
          <h5 class="m-2">3. Utilizando hidden para adicionar ou remover elementos </h5>

          <span class="lh-base fs-6">
            O atributo hidden é uma alternativa para ocultar e mostrar elementos, pode ser utilizado como uma property
            bind em conjunto com uma expressão booleana, o resultado da expressão define se o elemento aparece ou não,
            a principal diferenção para o ngIf é que, neste caso, ambas as divs aparecem no DOM, ou seja, se inspecionarmos
            o HTML verificaremos que as duas divs estão no código fonte, embora não apareçam na tela.
          </span>         
          <pre class="bg-light">
            {{textoHtmlHidden}}
          </pre>
          <div [hidden]="courses.length == 0" class="text-primary border border-primary p-3">
            Lista de cursos
          </div>
          <div [hidden]="courses.length > 0" class="text-danger border border-danger p-3">
            Ainda não há cursos
          </div>

        </div>

        <div *ngSwitchCase="'switch'"> 
          <h3 class="p-2"> Como utilizar a diretiva ngSwitchCase</h3>
          <div>
          <span class="lh-base fs-6">
            O ngSwitchCase directive é recomendável para quando queremos comparar uma property ou um field 
            contra múltiplos valores, um exemplo prático de uso seria a ativação de menus quando clicados. 
            Conforme exemplificado abaixo, neste cenário, tem-se uma lista de opções, quando a opção for clicada
            o evento (click) atribui um valor para a property testeSwitch, esse valor atribuído é utilizado 
            para verificar se a classe 'active' utilizada para destacar a opção clicada será ou não habilitada,
            para que ela seja habilitada é necessário que a expressão "testeSwitch == 'valor'" seja verdadeira. Em sendo 
            verdadeira além da ativação da classe active, a div correspondente será exibida, conforme instrução
            ngSwitchCase.
          </span>
          
          
        </div>
          <pre class="bg-light">
            {{ textoSwitchCase }}
          </pre>
       
          <ul class="nav nav-tabs">
            <li class="nav-item"> 
              <a href="#" class="nav-link" [class.active]="testeSwitch == 'mapa'" (click)="testeSwitch = 'mapa'">Mapa</a>  
            </li>
            <li class="nav-item"> 
              <a href="#" class="nav-link" [class.active]="testeSwitch == 'lista'" (click)="testeSwitch = 'lista'">Lista</a> 
            </li>
            <li class="nav-item"> 
              <a href="#" class="nav-link" [class.active]="testeSwitch == 'outros'" (click)="testeSwitch = 'outros'">Outros</a> 
            </li>
          </ul>

          <div [ngSwitch]="testeSwitch">
            <div *ngSwitchCase="'mapa'" class="p-2"> Conteúdo de Mapa </div>
            <div *ngSwitchCase="'lista'" class="p-2"> Conteúdo de Lista </div>
            <div *ngSwitchCase="'outros'" class="p-2"> Conteúdo de Outros </div>
          </div>
       
        </div>

        <div *ngSwitchCase="'for'">
          <h3 class="p-2">Utilizando o NgFor</h3>
          <span class="fs-6 lh-base">
            Utilizado para renderizar uma lista de objetos o NgFor tem também valores exportáveis,
            são valores que podem ser extraídos com o uso de palavras reservadas, estes valores são:
            first: boolean; index: number; last: boolean; even: boolean; odd: boolean; count int, o significado é
            auto-explicativo. No exemplo abaixo o usuário informa a quantidade de cursos que quer exibir,
            valor entre 1 e 10 e o ngFor faz a exibição do html correspondente. Também é possível incluir os
            índices e marcar se deseja apenas as ocorrências pares ou ímpares.
          </span>
          <div class="row g-2 p-3 bg-light mt-2">
            <div class="col-auto">
              <label class="align-middle" for="totalDeCursos"> Informe a quantidade de cursos<br /> a serem exibidos</label>
            </div>
            <div class="col-auto">
              <input type="number" class="form-control" id="totalDeCursos" #total>
            </div>
            <div class="col-auto">
              <input type="button" class="btn btn-primary" value="Ver Cursos" (click)="onClickSendTotal(total.value)">
            </div>
            <div class="col-auto form-check form-switch m-3">              
              <input type="checkbox" class="form-check-input" id="flexSwitchIndice"  [(ngModel)]="mySwitch" > 
              <label for="flexSwitchIndice" class="form-check-label"> Mostrar índices? </label>
            </div>
            <div class="col-auto form-check form-switch m-3">              
              <input type="checkbox" class="form-check-input" id="flexSwitchIndice" [(ngModel)]="switchPar"> 
              <label for="flexSwitchIndice" class="form-check-label"> Mostrar apenas pares? </label>
            </div>
            <div class="col-auto form-check form-switch m-3">              
              <input type="checkbox" class="form-check-input" id="flexSwitchIndice" [(ngModel)]="switchImpar"> 
              <label for="flexSwitchIndice" class="form-check-label"> Mostrar apenas ímpares? </label>
            </div>
          </div>
          <ul class="list-group list-group-flush">            
            <li class="list-group-item" *ngFor="let curso of cursos; let i = index; let isEven = even; let isOdd = odd; trackBy: trackby">

              <div *ngIf="switchImpar == true; then impares; else null;"> </div>
              <div *ngIf="switchPar == true; then pares; else null;"> </div>
              <div *ngIf="switchPar == false && switchImpar == false; then todos; else null;"> </div>

              <ng-template #impares>
                  <span *ngIf="isEven"> <span [hidden]="mySwitch == false"> {{ i }} - </span> {{ curso.nome }}  </span>
              </ng-template>

              <ng-template #pares>
                <span *ngIf="isOdd"> <span [hidden]="mySwitch == false"> {{ i }} - </span> {{ curso.nome }} </span>
              </ng-template>

              <ng-template #todos>
                <span> <span [hidden]="mySwitch == false"> {{ i }} - </span> {{ curso.nome }}  </span>                 
              </ng-template>              
            </li>
          </ul>


          <pre class="bg-light">
            {{ textoFor }}
          </pre>
          <h4> Uso do trackBy </h4>
          <span class="m-2 fs-6 lh-base">
            A diretiva NgFor possui a variável trackBy que recebe uma função, a função implementa a forma como
            as mudanças nos elementos serão rastreados pelo angular, caso ela não seja implementada o padrão do Angular é utilizar
            a referência do objeto, ou seja, será sempre um valor novo quando a página for atualizada, caso deseje
            que o Angular substitua os itens da lista somente quando forem de fato adicionados novos itens,
            implemente o método trackByFn, este método recebe dois parâmetros: index e item. O uso do trackBy é especialmente
            útil quando temos um grande volume de dados, usando o trackBy diminuímos o uso de recursos, auxiliando
            no desempenho da aplicação.
          </span>

          <pre class="bg-light">
            {{textoTrackBy}}
          </pre>
        </div>
        <div *ngSwitchCase="'ngclasse'" class="m-2">
          <h3> Utilizando o ngClass </h3>
          <span class="fs-6 lh-base">
            Suponha a necessidade da criação de um componente para favoritar um determinado item,
            esse componente deve ficar preenchido quando clicado pela primeira vez (favoritado) e deve
            se esvaziar quando desfavoritado, para implementar essa ação você pode utilizar um duplo 
            class binding, onde sempre que o item for clicado a classe oposta a que está 
            ativada é habilitada, assim:
            
            <pre class="bg-light">
              {{ textoClassBinding }}
            </pre>
          </span>
          <span class="mb-4"> Clique na estrela para visualizar o funcionamento do componente </span>
          <app-favorite [favorito]="post.isFavorite" (change)="onFavoriteChanged($event)"> </app-favorite>
          <br />
          <span class="fs-6">
            Uma abordagem alternativa seria utilizar o ngClass, passando um objeto chave valor onde o nome da
            classe é a chave e a propriedade é o valor, assim:
          </span>
          <pre class="bg-light">
            {{ textoNgClass }}
          </pre>
          <span> O que também pode ser feito com o uso de uma expressão no class binding, passando a 
            expressão como um objeto, bastante similar ao ngClass, assim:
          </span>
          <pre class="bg-light">
            {{textoExpressaoClassBinding}}
          </pre>
    
        </div>
        <div *ngSwitchCase="'ngestilo'">
          <h3 class="m-2"> Utilizando o NgStyle </h3>
          <span class="fs-6 lh-base">
            Similar ao ngClass, o ngStyle permite que seja passado um objeto com as chaves funcionando
            como o nome dos atributos css e os valores podem ser expressões que retornam o valor para 
            o atributo.
          </span>
          <button
            [style.backgrounColor]="canSave ? 'blue': 'red'"
            [style.color]="canSave ? 'blue' : 'black'">             
            Salvar 
          </button>
          
    
        </div>
        <div *ngSwitchCase="'outros'" class="m-2">
          <h4> Leading Asterisk </h4>
          <span class="fs-6 lh-base">
            O asterisco que precede as diretivas *ngIf, *ngFor e outras é utilizado para sinalizar a
            substituição do conteúdo interno do elemento que o contém por um ng-template, na prática ele
            facilita a construção dos blocos ngIf encapsulando a criação dos blocos, sem o seu uso a criação
            de um ngIf teria que prever o if e o else, veja no código abaixo como seria:
          </span>
          <pre class="bg-light">
            {{ textNgIfSemAsterisco }}
          </pre>
          </div>

     
      </div>
      
    </div>
    
    <div *ngSwitchCase="'Componente'">
      <app-submenus [subMenus]="menusComponentes" (menuAtivado)="updateViewMode($event)"></app-submenus>

      <div [ngSwitch]="viewMode">

        <div *ngSwitchCase="'overview'" class="m-2">
          <h3> Visão Geral dos Componentes </h3>
          <span class="fs-6">
            As aplicações Angular são baseadas em componentes, os componentes são os principais blocos de 
            construção do Angular. Cada componente possui:           
          </span>
          <ul class="list-group list-group-flush fs-6">
            <li class="list-group-item"> <small> Um template HTML com a marcação e conteúdo da página </small></li>
            <li class="list-group-item"> <small>  classe TypeScript que define o comportamento do componente </small></li>
            <li class="list-group-item"> <small> Um seletor CSS que define como o componente será invocado </small></li>              
          </ul>
          <span>
              Para criar um componente é requisito ter instalado também o Angular CLI e também ter 
              criado um workspace do Angular com os arquivos iniciais de uma aplicação Angular, para 
              criar digite ng new project-name, onde project-name é o nome de sua aplicação angular.
          </span>

          <h4 class="mt-2">Criando um componente</h4>
          <span>
            A melhor forma de criar um componente é pelo uso do Angular CLI, mas também pode ser feito 
            manualmente, para criar através do  Agular CLI, navegue até a pasta do seu projeto Angular, digite            
             <code class="bg-light">ng generate component component-name </code>, conde component-name 
            é o nome do seu componente. Por padrão, este componente cria o seguinte:
          </span>
          <ul class="list-group list-group-numbered fs-6">
            <li class="list-group-item">Um diretório com o mesmo nome do componente</li>
            <li class="list-group-item">O arquivo do componente component-name.component.ts</li>
            <li class="list-group-item">Um template html, component-name.component.html</li>
            <li class="list-group-item">Um arquivo CSS, component-name.component.css</li>
            <li class="list-group-item">Um arquivo de especificação de testes component-name.component.spec.ts</li>
          </ul>
        </div>

        <div *ngSwitchCase="'viewencapsualtion'" class="m-2">
          <h3> View Encapsulation </h3>
          <span>
            No angular, o estilo de um componente pode ser encapsulado para limitar-se ao componente, assim, 
            não afeta o restante da aplicação, dentro do @Component decorator é disponibilizada a opção 
            encapsulation, que pode ser utilizada para controlar como o encapsulamento é aplicado. 
            Existem os seguintes modos:
          </span>
          <table class="table">
            <tr>
              <th>Modo</th>
              <th>Detalhe</th>
            </tr>
            <tr>
              <td> ViewEncapsulation.SadowDom</td>
              <td> O Angular utilizará o Shadow DOM API built-in do navegador para aplicar os estilos de forma isolada ao componente, contudo, 
                nem todos os navegadores possuem suporte para tal.</td>
            </tr>
            <tr>
              <td> ViewEncapsulation.Emulated</td>
              <td> O Angular modifica os seletores CSS aplicados ao componente, dessa forma ele emula o Shadow DOM. 
                Exemplo: quando definimos no css do nosso componente um <code> h1  color: red;  </code>  os elementos h1 
                definidos no html do componente receberão um atributo do tipo ngcontent, e o angular criará 
                uma marcação css diferenciada para todos os h1 que tiverem esse atributo, assim:
      
              </td>
            </tr>
            <tr>
              <td> ViewEncapsulation.None</td>
              <td> O Shadow DOM não é aplicado, assim, os estilos são válidos globalmente.</td>
            </tr>
          </table>
        </div>

          <div *ngSwitchCase="'sharingdata'" class="m-2">
            <h3> Compartilhamento de Dados </h3>
          </div>
        </div>
    </div>

    <div *ngSwitchCase="'Outros'">
     
       Outros
    </div>

  </div>
</div>
